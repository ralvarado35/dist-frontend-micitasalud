"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[1259],{1259:(w,f,r)=>{r.r(f),r.d(f,{RegisterModule:()=>D});var d=r(6895),m=r(27),t=r(433),v=r(6382),e=r(4650),_=r(866),C=r(5475);function h(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Nombre Clinica es requerido. "),e.qZA())}function Z(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,h,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.name_clinic.errors&&s.f.name_clinic.errors.required)}}function u(o,n){if(1&o&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.hij(" ",s.CustomControler," ")}}function R(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Nombre es requerido. "),e.qZA())}function a(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,R,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.name.errors&&s.f.name.errors.required)}}function c(o,n){if(1&o&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.hij(" ",s.CustomControler," ")}}function T(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Apellido es requerido. "),e.qZA())}function g(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,T,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.surname.errors&&s.f.surname.errors.required)}}function I(o,n){if(1&o&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.hij(" ",s.CustomControler," ")}}function A(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Correo es requerido. "),e.qZA())}function x(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Por favor, entre un correo v\xe1lido. "),e.qZA())}function N(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,A,2,0,"div",34),e.YNc(2,x,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.email.errors&&s.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",s.f.email.errors&&s.f.email.errors.email)}}function q(o,n){if(1&o&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.hij(" ",s.CustomControler," ")}}function P(o,n){1&o&&(e.TgZ(0,"div",17),e._uU(1," Este correo ya existe en nuestra base de datos "),e.qZA())}function E(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Password es requerido. "),e.qZA())}function J(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,E,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.password.errors&&s.f.password.errors.required)}}function L(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Confirmar Password es requerido. "),e.qZA())}function Q(o,n){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,L,2,0,"div",34),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.confirmPassword.errors&&s.f.confirmPassword.errors.required)}}function S(o,n){1&o&&(e.TgZ(0,"div",33),e._uU(1," Password no coinciden "),e.qZA())}const p=function(o){return{"is-invalid":o}},y=[{path:"",component:(()=>{class o{get f(){return this.form.controls}constructor(s,l,i){this.router=s,this.auth=l,this.staffService=i,this.routes=v._,this.passwordClass=!1,this.confirmPasswordClass=!1,this.isValidConfirmPassword=!1,this.existEmail=!1,this.form=new t.cw({name:new t.NI("",[t.kI.required,t.kI.minLength(3)]),surname:new t.NI("",[t.kI.required]),name_clinic:new t.NI("",[t.kI.required]),email:new t.NI("",[t.kI.required,t.kI.email]),password:new t.NI("",[t.kI.required]),confirmPassword:new t.NI("",[t.kI.required])})}submit(){this.form.value.password!=this.form.value.confirmPassword?(this.isValidConfirmPassword=!0,console.log(this.isValidConfirmPassword)):(this.isValidConfirmPassword=!1,this.auth.login(this.form.value.email?this.form.value.email:"",this.form.value.password?this.form.value.password:""),console.log(this.form.value),this.auth.registerUser(this.form.value).subscribe(s=>{console.log("Alguna respuesta: "+s.message),400==s.message&&(console.log("Entro aqui: "+s.ok),this.existEmail=!0)}))}passwordFunc(){this.passwordClass=!this.passwordClass}confirmPasswordFunc(){this.confirmPasswordClass=!this.confirmPasswordClass}static#e=this.\u0275fac=function(l){return new(l||o)(e.Y36(m.F0),e.Y36(_.e),e.Y36(C.x))};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:77,vars:38,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],[3,"routerLink"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"login-danger"],["type","text","formControlName","name_clinic",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["type","text","formControlName","surname",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","login-danger",4,"ngIf"],["formControlName","password",1,"form-control","pass-input",3,"type","ngClass"],[1,"profile-views","toggle-password",3,"ngClass","click"],["formControlName","confirmPassword",1,"form-control","pass-input-confirm",3,"type","ngClass"],[1,"profile-views","confirm-password",3,"ngClass","click"],[1,"forgotpass"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"next-sign"],[1,"account-subtitle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(l,i){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()()(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"a",13),e._UZ(14,"img",14),e.qZA()(),e.TgZ(15,"h2"),e._uU(16,"Crear Cl\xednica/Hospital"),e.qZA(),e.TgZ(17,"form",15),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(18,"div",16)(19,"label"),e._uU(20,"Nombre Clinica/Hospital "),e.TgZ(21,"span",17),e._uU(22,"*"),e.qZA()(),e._UZ(23,"input",18),e.YNc(24,Z,2,1,"div",19),e.YNc(25,u,2,1,"div",19),e.qZA(),e.TgZ(26,"div",16)(27,"label"),e._uU(28,"Nombre "),e.TgZ(29,"span",17),e._uU(30,"*"),e.qZA()(),e._UZ(31,"input",20),e.YNc(32,a,2,1,"div",19),e.YNc(33,c,2,1,"div",19),e.qZA(),e.TgZ(34,"div",16)(35,"label"),e._uU(36,"Apellido "),e.TgZ(37,"span",17),e._uU(38,"*"),e.qZA()(),e._UZ(39,"input",21),e.YNc(40,g,2,1,"div",19),e.YNc(41,I,2,1,"div",19),e.qZA(),e.TgZ(42,"div",16)(43,"label"),e._uU(44,"Correo "),e.TgZ(45,"span",17),e._uU(46,"*"),e.qZA()(),e._UZ(47,"input",22),e.YNc(48,N,3,2,"div",19),e.YNc(49,q,2,1,"div",19),e.YNc(50,P,2,0,"div",23),e.qZA(),e.TgZ(51,"div",16)(52,"label"),e._uU(53,"Password "),e.TgZ(54,"span",17),e._uU(55,"*"),e.qZA()(),e._UZ(56,"input",24),e.YNc(57,J,2,1,"div",19),e.TgZ(58,"span",25),e.NdJ("click",function(){return i.passwordFunc()}),e.qZA()(),e.TgZ(59,"div",16)(60,"label"),e._uU(61,"Confirmar Password "),e.TgZ(62,"span",17),e._uU(63,"*"),e.qZA()(),e._UZ(64,"input",26),e.YNc(65,Q,2,1,"div",19),e.YNc(66,S,2,0,"div",19),e.TgZ(67,"span",27),e.NdJ("click",function(){return i.confirmPasswordFunc()}),e.qZA()(),e._UZ(68,"div",28),e.TgZ(69,"div",29)(70,"button",30),e._uU(71," Registrarse "),e.qZA()()(),e.TgZ(72,"div",31)(73,"p",32),e._uU(74," Ya tienes una cuenta? "),e.TgZ(75,"a",13),e._uU(76,"Ingresar"),e.qZA()()()()()()()()()()()),2&l&&(e.xp6(13),e.Q6J("routerLink",i.routes.adminDashboard),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("ngClass",e.VKq(26,p,i.f.name_clinic.touched&&i.f.name_clinic.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.name_clinic.touched&&i.f.name_clinic.invalid),e.xp6(1),e.Q6J("ngIf",0!==i.CustomControler),e.xp6(6),e.Q6J("ngClass",e.VKq(28,p,i.f.name.touched&&i.f.name.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.name.touched&&i.f.name.invalid),e.xp6(1),e.Q6J("ngIf",0!==i.CustomControler),e.xp6(6),e.Q6J("ngClass",e.VKq(30,p,i.f.surname.touched&&i.f.surname.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.surname.touched&&i.f.surname.invalid),e.xp6(1),e.Q6J("ngIf",0!==i.CustomControler),e.xp6(6),e.Q6J("ngClass",e.VKq(32,p,i.f.email.touched&&i.f.email.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.email.touched&&i.f.email.invalid),e.xp6(1),e.Q6J("ngIf",0!==i.CustomControler),e.xp6(1),e.Q6J("ngIf",i.existEmail),e.xp6(6),e.Q6J("type",i.passwordClass?"text":"password")("ngClass",e.VKq(34,p,i.f.password.touched&&i.f.password.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.password.touched&&i.f.password.invalid),e.xp6(1),e.Q6J("ngClass",i.passwordClass?"feather icon-eye":"feather icon-eye-off"),e.xp6(6),e.Q6J("type",i.passwordClass?"text":"password")("ngClass",e.VKq(36,p,i.f.confirmPassword.touched&&i.f.confirmPassword.invalid)),e.xp6(1),e.Q6J("ngIf",i.f.confirmPassword.touched&&i.f.confirmPassword.invalid),e.xp6(1),e.Q6J("ngIf",i.isValidConfirmPassword),e.xp6(1),e.Q6J("ngClass",i.confirmPasswordClass?"feather icon-eye":"feather icon-eye-off"),e.xp6(3),e.Q6J("disabled",i.form.invalid),e.xp6(5),e.Q6J("routerLink",i.routes.login))},dependencies:[d.mk,d.O5,m.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u]})}return o})()}];let O=(()=>{class o{static#e=this.\u0275fac=function(l){return new(l||o)};static#o=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(y),m.Bz]})}return o})();var Y=r(9079);let D=(()=>{class o{static#e=this.\u0275fac=function(l){return new(l||o)};static#o=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[d.ez,O,Y.m]})}return o})()},5862:(w,f,r)=>{r.d(f,{$g:()=>t});const t="http://api.micitasalud.com"},866:(w,f,r)=>{r.d(f,{e:()=>Z});var d=r(6382),m=r(5862),t=r(4004),v=r(262),e=r(9646),_=r(4650),C=r(27),h=r(529);let Z=(()=>{class u{constructor(a,c){this.router=a,this.http=c,this.getLocalStorage()}getLocalStorage(){if(localStorage.getItem("token")&&localStorage.getItem("user")){const a=localStorage.getItem("user");this.user=JSON.parse(a||""),this.token=localStorage.getItem("token")}else this.user=null,this.token=null}registerUser(a){return this.http.post(m.$g+"/auth/register",a)}login(a,c){return this.http.post(m.$g+"/auth/login",{email:a,password:c}).pipe((0,t.U)(g=>(console.log(g),this.saveLocalStorage(g))),(0,v.K)(g=>(console.log(g),(0,e.of)(void 0))))}saveLocalStorage(a){return!(!a||!a.access_token||(localStorage.setItem("token",a.access_token),localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("authenticated","true"),localStorage.setItem("clinic_id",a.user.clinic_id),0))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authenticated"),localStorage.removeItem("clinic_id"),this.router.navigate([d._.login])}static#e=this.\u0275fac=function(c){return new(c||u)(_.LFG(C.F0),_.LFG(h.eN))};static#o=this.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);